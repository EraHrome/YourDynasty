@model MatchesResultModel

@{
    ViewData["Title"] = "Matches Page";

    var response = Model.Recognize;
}

<!--
    *******************
    SLIDER
    *******************
    -->
<div class="top-header">
    <div class="total-grad"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="specs">
                    <div class="">
                        <img src="~/img/avatars/avatar3.png" height="42" alt="">
                    </div>
                </div>
                <div class="wrapper">
                    <div class="heading">Иван Иванов    <i class="fas fa-check"></i></div>
                    <h3 class="subheding">Премиум-подписка активна до 30.11.2022</h3>
                </div>
            </div>
        </div>
    </div>
</div>
<!--
    *******************
    WHY CHOOSE ELASTIC
    *******************
    -->
<section class="services classic sec-uping">
    <div class="container">
        <div class="service-wrap">
            <div class="row">
                <div class="col-sm-1 col-md-4">
                    <div class="service-section">
                        <div class="title">Генеалогическое древо</div>
                        <p class="subtitle">
                            Сохраните память о поколениях и найдите своих родственников
                        </p>
                        <a href="" class="btn btn btn-default-green-fill">Перейти</a>
                    </div>
                </div>
                <div class="col-sm-12 col-md-4">
                    <div class="service-section-action service-section">
                        <div class="title">Поиск по фото</div>
                        <p class="subtitle">
                            Ищите людей в социальных сетях с помощью фотографий
                        </p>
                    </div>
                </div>
                <div class="col-sm-12 col-md-4">
                    <div class="service-section">
                        <div class="plans badge feat bg-green">Новое</div>
                        <div class="title">Запрос архивов</div>
                        <p class="subtitle">
                            Найдите данные о родственниках в открытых банках данных
                        </p>
                        <a href="/search/memorial" class="btn btn btn-default-green-fill">Перейти</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="overview sec-normal sec-bg1">
    <div class="container">
        <h3 class="testimonials wrapper heading">Результат поиска совпадений:</h3>
        <p>Нашли этого человека среди ранее загруженных результатов?</p>

        @if (response != null)
        {
            @foreach (var face in Model.Faces)
            {
                <div class="row">
                    <div class="col-sm-12 col-md-4">
                        <div class="img-over sec-grad-grey-to-grey">
                            <img src="@($"data:image/png;base64, {@face.ImageBase64}")" alt="">
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-8">
                        <div class="overview-info">
                            <h2 class="section-heading">@($"Вероятность совпадения: {response.Results.FirstOrDefault(res => res.FaceUuid == Model.FaceId).Matches.FirstOrDefault(match => match.FaceUuid == face.Face.FaceUuid).Confidence}")</h2>

                            <p class="overview-txt">
                                @($"Возраст: {face.Face.Tags.First(tag => tag.Name == "age").Value}")
                            </p>
                        </div>
                    </div>
                </div>
            }
        }

    </div>
</div>
